

# 2-3树

定义

    由2结点和3结点组成的树，
    并且所有叶子节点都在同一层上

2结点

    每个节点包含一个元素和两个孩子（或者没有孩子）。
    其中左孩子小于该节点元素，右孩子大于该节点元素。 
3结点

    每个节点包含两个元素和三个孩子（或者没有孩子）。
    其中左孩子小于节点中较小元素，中孩子大于较小的小于较大的元素，右孩子大于较大的元素。 


# 特性

　　1）如果中序遍历2-3查找树，就可以得到排好序的序列；
　　2）在一个完全平衡的2-3查找树中，根节点到每一个为空节点的距离都相同。


# 查找

方法

    2-3树的查找和二叉查找树类似，要确定一个树是否属于2-3树，我们首先和其跟节点进行比较，如果相等，则查找成功；
    否则根据比较的条件，在其左中右子树中递归查找，如果找到的节点为空，则未找到，否则返回。

效率
  
    2-3树的查找效率与树的高度是息息相关的。
      
    在最坏的情况下，也就是所有的节点都是2-node节点，查找效率为lgN
    在最好的情况下，所有的节点都是3-node节点，查找效率为log3N约等于0.631lgN
    距离来说，对于1百万个节点的2-3树，树的高度为12-20之间，对于10亿个节点的2-3树，树的高度为18-30之间。


# 插入

## 往一个2-node节点插入

    往2-3树中插入元素和往二叉查找树中插入元素一样，
    首先要进行查找，然后将节点挂到未找到的节点上。
    如果查找后未找到的节点是一个2-node节点，那
    只需要将新的元素放到这个2-node节点里面使其变成一个3-node节点即可。

## 往一个3-node节点插入

### 只包含一个3-node节点

    假设2-3树只包含一个3-node节点，
    这个节点有两个key，没有空间来插入第三个key了，
    最自然的方式是我们假设这个节点能存放三个元素，暂时使其变成一个4-node节点，同时他包含四个子节点。
    然后，我们将这个4-node节点的中间元素提升，左边的节点作为其左节点，右边的元素作为其右节点。
    插入完成，变为平衡2-3查找树，树的高度从0变为1。

### 节点是3-node，父节点是2-node

    将新的元素插入到3-node节点中，使其成为一个临时的4-node节点，
    然后，将该节点中的中间元素提升到父节点即2-node节点中，
    使其父节点成为一个3-node节点，然后将左右节点分别挂在这个3-node节点的恰当位置。

### 节点是3-node，父节点也是3-node
    
    当我们插入的节点是3-node的时候，
    我们将该节点拆分，中间元素提升至父节点，
    但是此时父节点是一个3-node节点，插入之后，父节点变成了4-node节点，
    然后继续将中间元素提升至其父节点，直至遇到一个父节点是2-node节点，
    然后将其变为3-node，不需要继续进行拆分。

### 根节点分裂
    
    当根节点到字节点都是3-node节点的时候，
    这是如果我们要在字节点插入新的元素的时候，会一直查分到跟节点，
    在最后一步的时候，跟节点变成了一个4-node节点，
    这个时候，就需要将跟节点查分为两个2-node节点，树的高度加1

### 本地转换
    
    将一个4-node拆分为2-3node涉及到6种可能的操作。
    这4-node可能在跟节点，也可能是2-node的左子节点或者右子节点。
    或者是一个3-node的左，中，右子节点。
    所有的这些改变都是本地的，不需要检查或者修改其他部分的节点。
    所以只需要常数次操作即可完成2-3树的平衡。


## 性质


    这些本地操作保持了2-3树的平衡。
    对于4-node节点变形为2-3节点，变形前后树的高度没有发生变化。
    只有当跟节点是4-node节点，变形后树的高度才加一。


# 实现 

    
    直接实现2-3树比较复杂，因为：
    
    需要处理不同的节点类型，非常繁琐
    需要多次比较操作来将节点下移
    需要上移来拆分4-node节点
    拆分4-node节点的情况有很多种
    2-3查找树实现起来比较复杂，在某些情况插入后的平衡操作可能会使得效率降低。
    在2-3查找树基础上改进的红黑树不仅具有较高的效率，并且实现起来较2-3查找树简单。
    
    
# 2-3-4树

    由2结点,3结点,4结点组成的树，
    并且所有叶子节点都在同一层上
 
图例

![这里写图片描述](http://img.blog.csdn.net/20180309165445766?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcm9kX2pvaG4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)    