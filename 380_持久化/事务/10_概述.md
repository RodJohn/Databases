
# 概述

    事务是关系型数据库的重要特征

# 1 特性

	事务需要满足ACID四个特性。

## 1.1 原子性
	A(atomicity) 原子性。
	一个事务的执行被视为一个不可分割的最小单元。
	事务里面的操作，要么全部成功执行，要么全部失败回滚，不可以只执行其中的一部分。
	
## 1.2 一致性	
	C(consistency) 一致性。
	一个事务的执行不应该破坏数据库的完整性约束。
	
## 1.3 隔离性
	
	I(isolation) 隔离性。
	通常来说，事务之间的行为不应该互相影响。
	然而实际情况中，事务相互影响的程度受到隔离级别的影响。
	
## 1.4 持久性	

	D(durability) 持久性。
	事务提交之后，需要将提交的事务持久化到磁盘。即使系统崩溃，提交的数据也不应该丢失。

# 2 隔离级别

	事务的四种隔离级别

## 2.1 未提交读
	定义
	    READ UNCOMMITTED(未提交读)。
	解释
	    事务A对数据做的修改，即使没有提交，对于事务B来说也是可见的，
	问题
	    读取到其他事务未提交的数据叫脏读。
	运用
	    这是隔离程度较低的一种隔离级别，在实际运用中会引起很多问题，因此一般不常用。

## 2.2 提交读
	定义
	    READ COMMITTED(提交读)。
	解释
	    事务A对数据做的修改，提交之后会对事务B可见，
	    举例，事务B开启时读到数据1，接下来事务A开启，把这个数据改成2，提交，B再次读取这个数据，会读到最新的数据2。
	问题
        在RC的隔离级别下，不会出现脏读的问题。
        在RC的隔离级别下，会出现不可重复读的问题。
	    举例，事务B开启时读到数据1，接下来事务A开启，把这个数据改成2，提交，B再次读取这个数据，仍然只能读到1。
	运用
        这个隔离级别是许多数据库的默认隔离级别,比如oracle。
        
## 2.3 可重复读
	
	定义
	    REPEATABLE READ(可重复读)。
	解释
	    事务A对数据做的修改，提交之后，对于先于事务A开启的事务是不可见的。
	问题
	    在RR的隔离级别下，不会出现不可重复读的问题。
	    在RR的隔离级别下，会出现幻读的问题。
        幻读的意思是，当某个事务在读取某个范围内的值的时候，另外一个事务在这个范围内插入了新记录，那么之前的事务再次读取这个范围的值，会读取到新插入的数据。     	
	应用
	    Mysql默认的隔离级别是RR，然而mysql的innoDB引擎间隙锁成功解决了幻读的问题。


## 2.4 串行化
	
	定义
	    SERIALIZABLE(可串行化)。
	解释
	    可串行化是最高的隔离级别。
	    这种隔离级别强制要求所有事物串行执行，在这种隔离级别下，读取的每行数据都加锁，会导致大量的锁征用问题，性能最差。
    


# 3 事务传播

    事务传播是谁的概念

	Mysql是不支持嵌套事务的，开启了一个事务的情况下，再开启一个事务，会隐式的提交上一个事务。
	在spring的托管中?



# 参考

举例

https://www.cnblogs.com/WJ-163/p/6023054.html

