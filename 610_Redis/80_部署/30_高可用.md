
http://www.cnblogs.com/hjwublog/p/5681700.html




# 3 主从复制

概念

    在主从复制中，数据库分为两类，一类是主数据库（master），另一类是从数据库[1] （slave）。
    主数据库可以进行读写操作，当写操作导致数据变化时会自动将数据同步给从数据库。
    而从数据库一般是只读的，并接受主数据库同步过来的数据。
    一个主数据库可以拥有多个从数据库，而一个从数据库只能拥有一个主数据库。
    
过程

    当从数据库启动时，会向主数据库发送sync命令，
    主数据库接收到sync后开始在后台保存快照rdb，在保存快照期间收到的命令将被缓存起来，
    当快照完成时，主数据库会将快照和缓存的命令一块发送给从。复制初始化结束。
    之后，主每受到1个命令就同步发送给从。 
    当出现断开重连后，2.8之后的版本会将断线期间的命令传给重数据库。增量复制
    
    主从复制是乐观复制，当客户端发送写执行给主，主执行完立即将结果返回客户端，并异步的把命令发送给从，从而不影响性能。 

    主数据库异常,只能手动将从数据库升级为主数据库
特点

    完整复制
    异步保存
    读写分离

配置

    1.从redis的conf文件加入 slaveof ip port 就可以了 
    2.或者从redis启动时  redis-server --port 6380 --slaveof 127.0.0.1 6379 


# 4 哨兵


概念

过程

    哨兵的作用就是监控redis主、从数据库是否正常运行，主出现故障自动将从数据库转换为主数据库。

特点

    基于主从复制
    监控主数据库和从数据库是否正常运行。 
    主数据库出现故障时自动将从数据库转换为主数据库。

配置

    1.主从
        设置1主二从
        redis-server --port 6379 
        redis-server --port 6380 --slaveof 192.168.0.167 6379 
        redis-server --port 6381 --slaveof 192.168.0.167 6379   
    2.哨兵
        设置配置文件
        sentinel.conf 
            sentinel monitor mymaster 192.168.0.167 6379 1 
        开启监控
        redis-sentinel sentinel.conf 


# 5 集群Cluster


    Redis原生的Redis Cluster提供集群功能。
    Redis Cluster从Redis 3.0开始引入，3.2版本之后非常稳定了。


特点

    分布式存储
    
    
配置



# 参考

https://www.cnblogs.com/xifenglou/p/8372447.html\
    
https://blog.csdn.net/u010963948/article/details/78963572\    