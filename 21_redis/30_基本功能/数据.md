



Redis支持的数据类型要丰富得多，常用的数据类型主要有五种：String、List、Hash、Set和Sorted Set




Redis内部使用一个redisObject对象来表示所有的key和value。redisObject主要的信息包括数据类型（type）、编码方式(encoding)、数据指针（ptr）、虚拟内存（vm）等。type代表一个value对象具体是何种数据类型，encoding是不同数据类型在redis内部式。

                                     


	


Key
key的设置:

exists key
	返回1存在,0不存在

del key 
	删除key,可以多个
	返回删除的个数

String
设置
	set(key, value)：
添加键值对,key存在修改,不存在新增
*setnx(key, value)：
添加键值对,如果key存在,返回0
	*setex(key, time, value)：
添加键值对,time为存活时间(秒)
mset(key N, value N)：
批量添加键值对,
mset(4 4 5 5) 添加4-4 5-5
msetnx(key N, value N)：
批量添加键值对,
*getset(key, value)：
设置键值对,并返回上次的值,
如果key不存在,新增返回null
*append(key, value)：
名称为key的string的值附加value
不存在将新增

获取
*get(key)：
获取键值
mget(key1, key2,…, key N)：
	批量获取键值
substr(key, start, end)：
返回名称为key的string的value的子串

数字操作
*incr/decr(key)：
自增/减1,
如果key不存在,会先创建,然后执行命令
如果值不是数字类型,将报错(下同)
incrby/decrby/incrbyfloat(key, integer)：
自增指定的数量


Hash
结构分析

Hash是一个String类型的field和value之间的映射表，即redis的Hash数据类型的key（hash表名称）对应的value实际的内部存储结构为一个HashMap，因此Hash特别适合存储对象。相对于把一个对象的每个属性存储为String类型，将整个对象存储在Hash类型中会占用更少内存。



当前HashMap的实现有两种方式：当HashMap的成员比较少时Redis为了节省内存会采用类似一维数组的方式来紧凑存储，而不会采用真正的HashMap结构，这时对应的value的redisObject的encoding为zipmap，当成员数量增大时会自动转成真正的HashMap,此时encoding为ht。


常用命令

hset  key filed value 
设置key对应的HashMap中的field的value
hset myhash name zhangsan
hget key filed
	获取key对应的HashMap中的field的value
hget myhash name
hgetall key
	获取key对应的HashMap中的所有field的value
		hgetall myhash
1) "name"
2) "zhangsan"
3) "age"
4) "20"




List

Redis的List类型其实就是每一个元素都是String类型的双向链表。我们可以从链表的头部和尾部添加或者删除元素。这样的List既可以作为栈，也可以作为队列使用。


Set

Redis 集合（Set类型）是一个无序的String类型数据的集合，类似List的一个列表，与List不同的是Set不能有重复的数据。实际上，Set的内部是用HashMap实现的，Set只用了HashMap的key列来存储对象。


SortSet

SortSet顾名思义，是一个排好序的Set，它在Set的基础上增加了一个顺序属性score，这个属性在添加修改元素时可以指定，每次指定后，SortSet会自动重新按新的值排序。
sorted set的内部使用HashMap和跳跃表(SkipList)来保证数据的存储和有序，HashMap里放的是成员到score的映射，而跳跃表里存放的是所有的成员，排序依据是HashMap里存的score。



